## π Spring Test

***

<br> 

### :pushpin: μ¤ν”„λ§ ν…μ¤νΈ

- μ¤ν”„λ§ ν”„λ μ„μ›ν¬μ—μ„ λ™μ‘ν•λ„λ΅ λ§λ“  ν΄λμ¤

- @Controller, @Service, @Repository, @Component λ“±μ΄ λ¶™μ€ ν΄λμ¤λ¥Ό ν…μ¤νΈ ν•λ” λ¨λ“

- JUnit ν…μ¤ν… ν”„λ μ„μ›ν¬ μ‚¬μ© 

  - μ¤ν”„λ§μ DI μ»¨ν…μ΄λ„λ¥Ό λ™μ‘μ‹ν‚¨λ‹¤.

  ```xml
  <!-- POM.xml μ„¤μ • -->
  <dependency>
  	<groupId>org.springframework</groupId>
      <artifactId>spring-test</artifactId>
      <version>${org.springframework-version}</version>
      <scope>test</scope>
  </dependency>
  ```



<br> 

### :pushpin: μ¤ν”„λ§ ν…μ¤νΈ μ• λ…Έν…μ΄μ…

- **@RunWith**
  - DI μ»¨ν…μ΄λ„ λ΅λ”©
  - DI μ»¨ν…μ΄λ„λ” Application Contextλ¥Ό λ§ν•λ‹¤.
- **@ContextConfiguration**
  - DI μ»¨ν…μ΄λ„μ **μ„¤μ • νμΌ μ„μΉ** λλ” **μ„¤μ • ν΄λμ¤** μ§€μ •

```java
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"file:src/main/webapp/WEB-INF/spring/root-context.xml"})
```

<br> 

### :pushpin: DataSource Test

```java
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"file:src/main/webapp/WEB-INF/spring/root-context.xml"})
public class DataSourceTest{
    @Inject
    private DataSource dataSource;
    
    // DataSource μ—°κ²° μ‘λ™ μ—¬λ¶€ ν…μ¤νΈ
    @Test
    public void testConnection() throws Exception{
        try(Connection con = dataSource.getConnection()){
            System.out.println(con);
        }
        catch(Exception e){
            e.printStackTrace();
        }
    }
    
    // sqlSession κ°μ²΄ μƒμ„± μ—¬λ¶€ ν…μ¤νΈ
    @Inject
    private SqlSessionFactory sqlFactory;
    
    @Test
    public void testFactory() throws Exception{
        try(SqlSession session = sqlFactory.openSession()){
            System.out.println(session);
        }
        catch(Exception e){
            e.printStackTrace();
        }
    }
}
```

